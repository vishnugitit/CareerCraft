/* ============================================================
   App.css â€” Responsive & Accessible
   - Ensures header title remains centered while the circular
     close button floats to the top-right without overlapping.
   - Responsive rules for steps grid, progress, buttons, popup,
     overlay/panel, and general form elements.
   ============================================================ */

/* ---------------------------
   Fonts & theme variables
   --------------------------- */
@import url("https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap");

:root {
  --bg: #f7fafc;
  --card: #fff;
  --muted: #6b7280;
  --primary: #2563eb;
  --success: #10b981;
  --danger: #ef4444;
  --radius: 12px;
  --shadow: 0 10px 30px rgba(2, 6, 23, 0.06);
  --panel-shadow: 0 18px 40px rgba(2, 6, 23, 0.35);
  --max-width: 1100px;
  --gutter: 20px;
  --close-size: 44px; /* size of circular close button */
  --close-gap: 12px; /* gap from panel's edge */
}

/* ---------------------------
   Base reset and body
   --------------------------- */
* {
  box-sizing: border-box;
}
html,
body {
  height: 100%;
}
body {
  margin: 0;
  font-family: "Poppins", sans-serif;
  background: var(--bg);
  color: #111827;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  line-height: 1.35;
  padding: env(safe-area-inset-top) env(safe-area-inset-right)
    env(safe-area-inset-bottom) env(safe-area-inset-left);
}

/* ---------------------------
   App root & fluid header
   --------------------------- */
.app-root {
  max-width: var(--max-width);
  margin: 0 auto;
  padding: clamp(12px, 2.2vw, 28px);
}

/* Header container is relative so we can absolutely position the close
   button inside the same bounding box without overlapping the centered title.
   We add right padding equal to close button width + gap so the title never
   collides with the button. */
.app-header {
  text-align: center;
  margin-bottom: 12px;
  position: relative;
  padding-right: calc(
    var(--close-size) + var(--close-gap) + 8px
  ); /* reserve space for close control */
}

/* Title uses clamp so it scales but stays centered. */
.app-header h1 {
  margin: 0;
  font-weight: 700;
  color: var(--primary);
  font-size: clamp(1rem, 3.2vw, 1.9rem);
  line-height: 1.05;
  word-break: break-word;
  hyphens: auto;
}

/* ---------------------------
   Shared card styles
   --------------------------- */
.step-card {
  background: var(--card);
  border-radius: var(--radius);
  padding: clamp(14px, 1.6vw, 22px);
  box-shadow: var(--shadow);
  margin-bottom: 18px;
}
.step-card h2 {
  margin-top: 0;
  font-size: 1.05rem;
}

/* Labels & inputs */
.step-card label {
  display: block;
  margin-bottom: 8px;
  font-size: 0.95rem;
  color: var(--muted);
}
.step-card input[type="text"],
.step-card input[type="email"],
.step-card input[type="date"],
.step-card select,
.step-card textarea {
  width: 100%;
  padding: calc(8px + 0.4vh) calc(10px + 0.4vw);
  border-radius: 10px;
  border: 1px solid #e6e8eb;
  font-size: clamp(0.9rem, 1.4vw, 1rem);
  background: #fff;
}
.step-card textarea {
  min-height: 110px;
  resize: vertical;
}

/* ---------------------------
   Steps / Icon grid
   --------------------------- */
.steps-grid {
  display: grid;
  gap: 12px;
  grid-template-columns: repeat(4, 1fr); /* desktop default */
  margin-bottom: 18px;
}
.steps-grid .step-item {
  background: #f9fbfc;
  border-radius: 12px;
  padding: 16px;
  text-align: center;
  box-shadow: 0 6px 18px rgba(2, 6, 23, 0.04);
  transition: transform 0.16s ease, box-shadow 0.16s ease;
}
.steps-grid .step-item .icon {
  display: inline-flex;
  width: 48px;
  height: 48px;
  border-radius: 50%;
  background: #fff;
  align-items: center;
  justify-content: center;
  margin-bottom: 8px;
  box-shadow: 0 6px 18px rgba(2, 6, 23, 0.04);
}
.steps-grid .step-item .label {
  font-size: 0.95rem;
  color: #111827;
}

/* ---------------------------
   Progress steps
   --------------------------- */
.progress-wrap {
  display: flex;
  gap: 12px;
  align-items: center;
  justify-content: space-between;
  margin-bottom: 16px;
  flex-wrap: wrap;
}
.progress-wrap .step {
  flex: 1 1 90px;
  min-width: 90px;
  text-align: center;
  padding: 8px 6px;
  background: #fff;
  border-radius: 10px;
  border: 1px solid #eef2ff;
  font-size: clamp(0.8rem, 1vw, 0.95rem);
}
.progress-wrap .step.done {
  border-color: var(--success);
  background: linear-gradient(90deg, #ecfdf5, #ffffff);
}
.progress-wrap .step.active {
  border-color: var(--primary);
  box-shadow: 0 8px 20px rgba(37, 99, 235, 0.08);
}

/* ---------------------------
   Buttons & actions
   --------------------------- */
.actions {
  display: flex;
  gap: 10px;
  justify-content: flex-end;
  margin-top: 12px;
  flex-wrap: wrap;
}
.actions .btn {
  padding: 10px 14px;
  border-radius: 10px;
  border: none;
  cursor: pointer;
  font-weight: 600;
  min-width: 96px;
  font-size: clamp(0.88rem, 1.2vw, 1rem);
}
.btn-primary {
  background: var(--primary);
  color: #fff;
  box-shadow: 0 8px 20px rgba(37, 99, 235, 0.12);
}
.btn-secondary {
  background: #f3f4f6;
  color: #111827;
}
.btn-add {
  background: #06b6d4;
  color: #fff;
  padding: 8px 10px;
  border-radius: 8px;
}
.btn-remove {
  background: #ff6161;
  color: #fff;
  padding: 8px 10px;
  border-radius: 8px;
}
.btn-ghost {
  background: transparent;
  border: 1px solid #ddd;
  padding: 8px 14px;
  border-radius: 6px;
  cursor: pointer;
}
.small-actions {
  display: flex;
  gap: 8px;
  align-items: center;
  flex-wrap: wrap;
}

/* Utility to force full-width on tiny screens */
.actions .btn.full-width {
  width: 100%;
}

/* ---------------------------
   Popup modal
   --------------------------- */
.popup {
  position: fixed;
  inset: 0;
  display: grid;
  place-items: center;
  z-index: 9999;
}
.popup-backdrop {
  position: absolute;
  inset: 0;
  background: rgba(2, 6, 23, 0.48);
}
.popup-card {
  position: relative;
  z-index: 2;
  background: #fff;
  padding: 18px;
  border-radius: 12px;
  width: min(520px, 94%);
  box-shadow: 0 18px 48px rgba(2, 6, 23, 0.16);
  text-align: center;
}
.close-icon {
  position: absolute;
  right: 12px;
  top: 10px;
  border: none;
  background: transparent;
  font-size: 20px;
  color: var(--danger);
  cursor: pointer;
}
.popup-card h3 {
  margin: 0;
  font-size: 1.05rem;
}
.popup-card p {
  color: #374151;
  margin-top: 8px;
}

/* ---------------------------
   Acknowledgement box
   --------------------------- */
.ack-box {
  background: #fff;
  padding: 12px;
  border-radius: 10px;
  margin-bottom: 12px;
}
.ack-box h3 {
  margin-bottom: 8px;
}

/* ---------------------------
   Overlay and AppForm panel
   --------------------------- */
.appform-overlay {
  position: fixed;
  inset: 0;
  display: flex;
  align-items: center;
  justify-content: center;
  background: rgba(12, 18, 24, 0.6);
  z-index: 1200;
  padding: 24px;
  pointer-events: auto;
  -webkit-overflow-scrolling: touch;
}
.appform-panel {
  background: #ffffff;
  border-radius: 12px;
  box-shadow: var(--panel-shadow);
  max-width: calc(var(--max-width) - 40px);
  width: 100%;
  max-height: 92vh;
  overflow: auto;
  position: relative;
  padding: clamp(16px, 2.4vw, 28px);
  box-sizing: border-box;
}

/* ---------------------------
   Floating circular close button
   - This is positioned inside the panel but visually anchored to top-right.
   - We avoid overlapping the header by reserving header padding (see .app-header).
   --------------------------- */
.overlay-close {
  position: absolute;
  top: calc(var(--close-gap));
  right: calc(var(--close-gap));
  background-color: var(--danger);
  color: #fff;
  border: none;
  width: var(--close-size);
  height: var(--close-size);
  border-radius: 50%;
  font-size: 20px;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  z-index: 1010;
  box-shadow: 0 6px 20px rgba(239, 68, 68, 0.22);
}

/* keep keyboard focus visible */
.overlay-close:focus {
  outline: 3px solid rgba(58, 114, 255, 0.9);
  outline-offset: 2px;
}

/* ensure children inside panel accept pointer events */
.appform-panel * {
  pointer-events: auto;
}

/* ---------------------------
   RESPONSIVE BREAKPOINTS
   - Desktop default
   - <=1024 large tablet
   - <=820 tablet / phablet
   - <=480 mobile
   --------------------------- */

/* Large tablet / small desktop */
@media (max-width: 1024px) {
  :root {
    --max-width: 900px;
    --close-size: 40px;
  }
  .steps-grid {
    grid-template-columns: repeat(3, 1fr);
  }
  .overlay-close {
    width: 40px;
    height: 40px;
    font-size: 18px;
    top: 10px;
    right: 10px;
  }
  .appform-panel {
    padding: clamp(14px, 2.2vw, 22px);
  }
  .app-header {
    padding-right: calc(var(--close-size) + var(--close-gap) + 6px);
  }
}

/* Tablet / phablet */
@media (max-width: 820px) {
  :root {
    --max-width: 760px;
    --close-size: 40px;
  }
  .steps-grid {
    grid-template-columns: repeat(2, 1fr);
  }
  .progress-wrap .step {
    min-width: 80px;
    font-size: 0.88rem;
  }
  .app-header h1 {
    font-size: clamp(1.15rem, 4.2vw, 1.6rem);
  }
  /* Add top padding within the panel so title is not visually crowded by the close button */
  .appform-panel {
    padding-top: calc(clamp(16px, 2.4vw, 28px) + 8px);
  }
  .overlay-close {
    top: 10px;
    right: 10px;
  }
  .app-header {
    padding-right: calc(var(--close-size) + var(--close-gap) + 6px);
  }
}

/* Mobile */
@media (max-width: 480px) {
  :root {
    --max-width: 420px;
    --close-size: 36px;
  }
  .steps-grid {
    grid-template-columns: repeat(1, 1fr);
  }
  .progress-wrap {
    flex-direction: column;
    align-items: stretch;
    gap: 8px;
  }
  .actions {
    flex-direction: column;
    align-items: stretch;
  }
  .actions .btn {
    width: 100%;
  }
  .app-header h1 {
    font-size: clamp(1rem, 5.5vw, 1.25rem);
    padding-inline: 6px;
  }
  .overlay-close {
    width: 36px;
    height: 36px;
    font-size: 16px;
    top: 8px;
    right: 8px;
  }
  .appform-panel {
    max-height: 88vh;
    padding: 14px;
    border-radius: 10px;
  }
  .step-card {
    padding: 12px;
  }
  .popup-card {
    width: 94%;
    padding: 12px;
  }
  .app-header {
    padding-right: calc(var(--close-size) + var(--close-gap) + 6px);
  }
}

/* Very small width phones */
@media (max-width: 360px) {
  .overlay-close {
    width: 34px;
    height: 34px;
    font-size: 15px;
  }
  .app-header h1 {
    font-size: 1rem;
  }
  .appform-panel {
    padding: 12px;
  }
  .step-card {
    padding: 10px;
  }
  .steps-grid .step-item {
    padding: 12px;
  }
}

/* ---------------------------
   Accessibility helpers & small utils
   --------------------------- */
a,
button,
input,
textarea,
select {
  font-family: inherit;
}
button:focus,
a:focus,
input:focus,
textarea:focus {
  outline: 3px solid rgba(58, 114, 255, 0.12);
  outline-offset: 2px;
}
.text-center {
  text-align: center;
}
.muted {
  color: var(--muted);
  font-size: 0.92rem;
}

/* ============================================================
   End of App.css
   ============================================================ */
